{"version":3,"sources":["perlin.js","drums.mid","tesselated.mp3","Midi.jsx","util/hslToHex.js","Scene.jsx","Effects.jsx","Terrain.jsx","Crystal.jsx","App.jsx","reportWebVitals.js","index.tsx"],"names":["global","module","noise","Grad","x","y","z","this","prototype","dot2","dot3","grad3","p","perm","Array","gradP","seed","Math","floor","i","v","F2","sqrt","G2","G3","fade","t","lerp","a","b","simplex2","xin","yin","i1","j1","s","j","x0","y0","x1","y1","x2","y2","gi0","gi1","gi2","t0","t1","t2","simplex3","zin","k1","i2","j2","k2","k","z0","z1","z2","x3","y3","z3","gi3","t3","perlin2","X","Y","n00","n01","n10","n11","u","perlin3","Z","n000","n001","n010","n011","n100","n101","n110","n111","w","objectArrayToKeyPairs","obj","result","Object","keys","forEach","isArray","reduce","o","item","Number","playTime","useMidiAction","callback","fallback","type","subtype","note","midi","window","currentMidi","midiEvents","getEvents","aud","currentAudio","events","audioStartTime","useRef","prevTime","prevEvents","useFrame","state","delta","elapsedMs","currentTime","current","length","threshold","undefined","filter","event","param1","checkForMidiAction","called","Midi","useState","setMidi","React","createRef","start","useEffect","url","success","error","xhr","XMLHttpRequest","onreadystatechange","e","readyState","status","currentTarget","response","statusText","open","responseType","send","getBuffer","drums","file","MidiFile","console","log","ticksPerBeat","header","getTicksPerBeat","setTicksPerBeat","Audio","tesselated","audioAnalyzerData","audioCtx","AudioContext","analyzer","createAnalyser","fftSize","bufferLength","frequencyBinCount","dataArray","Uint8Array","getByteTimeDomainData","source","createMediaElementSource","connect","destination","play","Date","now","pause","hslToHex","h","l","r","g","hue2rgb","q","toHex","hex","round","toString","Model","props","group","stars","color","useGLTF","nodes","materials","animations","actions","useAnimations","useThree","camera","mat","wireframe","opacity","col","THREE","cloth_mat","body_mat","hair_outer_mat","col2","hair_inner_mat","time","getMixer","setTime","target","position","controls","pos","lookAt","sin","ref","dispose","rotation","PI","name","material","geometry","morphTargetDictionary","material-color","morphTargetInfluences","object","_rootJoint","modelbody_body_mat_0","skeleton","modelteeth_upper_body_mat_0","modelteeth_lower_body_mat_0","modeltongue_body_mat_0","eyes_outer_mat","modeleyes_R_outer_eyes_outer_mat_0","eyes_inner_mat","modeleyes_R_inner_eyes_inner_mat_0","modeleyes_L_outer_eyes_outer_mat_0","modeleyes_L_inner_eyes_inner_mat_0","tear_mat","modeltear_L_tear_mat_0","modeltear_R_tear_mat_0","modelhair_outer_hair_outer_mat_0","modelhair_inner_hair_inner_mat_0","eyelash_mat","modeleyelash_L_upper_eyelash_mat_0","modeleyelash_L_lower_eyelash_mat_0","modeleyelash_R_upper_eyelash_mat_0","modeleyelash_R_lower_eyelash_mat_0","Stars","radius","depth","count","factor","saturation","preload","extend","EffectComposer","ShaderPass","RenderPass","UnrealBloomPass","FilmPass","AfterimagePass","FXAAShader","OrbitControls","ThreeControls","gl","update","args","domElement","Effects","composer","scene","size","setSize","width","height","render","useMemo","enablePan","enableZoom","enableDamping","minDistance","maxDistance","dampingFactor","rotateSpeed","maxPolarAngle","minPolarAngle","attachArray","uniforms-resolution-value","renderToScreen","updateMesh","ex","getAttribute","pa","array","hVerts","parameters","heightSegments","wVerts","widthSegments","pow","needsUpdate","Terrain","geo","noiseGeo","mesh","useUpdate","noiseGeometry","getByteFrequencyData","noisePos","noisePa","attach","specular","shininess","flatShading","Crystal","scale","crystal_17_2","crystal17_2_crystal_17_2_0","App","shadowMap","Stats","showPanel","className","Html","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.687098ba.chunk.js","sourcesContent":["/*\n * A speed-improved perlin and simplex noise algorithms for 2D.\n *\n * Based on example code by Stefan Gustavson (stegu@itn.liu.se).\n * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).\n * Better rank ordering method by Stefan Gustavson in 2012.\n * Converted to Javascript by Joseph Gentle.\n *\n * Version 2012-03-09\n *\n * This code was placed in the public domain by its original author,\n * Stefan Gustavson. You may use it as you see fit, but\n * attribution is appreciated.\n *\n */\n\n(function(global){\n  var module = global.noise = {};\n\n  function Grad(x, y, z) {\n    this.x = x; this.y = y; this.z = z;\n  }\n  \n  Grad.prototype.dot2 = function(x, y) {\n    return this.x*x + this.y*y;\n  };\n\n  Grad.prototype.dot3 = function(x, y, z) {\n    return this.x*x + this.y*y + this.z*z;\n  };\n\n  var grad3 = [new Grad(1,1,0),new Grad(-1,1,0),new Grad(1,-1,0),new Grad(-1,-1,0),\n               new Grad(1,0,1),new Grad(-1,0,1),new Grad(1,0,-1),new Grad(-1,0,-1),\n               new Grad(0,1,1),new Grad(0,-1,1),new Grad(0,1,-1),new Grad(0,-1,-1)];\n\n  var p = [151,160,137,91,90,15,\n  131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,\n  190, 6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,\n  88,237,149,56,87,174,20,125,136,171,168, 68,175,74,165,71,134,139,48,27,166,\n  77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,\n  102,143,54, 65,25,63,161, 1,216,80,73,209,76,132,187,208, 89,18,169,200,196,\n  135,130,116,188,159,86,164,100,109,198,173,186, 3,64,52,217,226,250,124,123,\n  5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,\n  223,183,170,213,119,248,152, 2,44,154,163, 70,221,153,101,155,167, 43,172,9,\n  129,22,39,253, 19,98,108,110,79,113,224,232,178,185, 112,104,218,246,97,228,\n  251,34,242,193,238,210,144,12,191,179,162,241, 81,51,145,235,249,14,239,107,\n  49,192,214, 31,181,199,106,157,184, 84,204,176,115,121,50,45,127, 4,150,254,\n  138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];\n  // To remove the need for index wrapping, double the permutation table length\n  var perm = new Array(512);\n  var gradP = new Array(512);\n\n  // This isn't a very good seeding function, but it works ok. It supports 2^16\n  // different seed values. Write something better if you need more seeds.\n  module.seed = function(seed) {\n    if(seed > 0 && seed < 1) {\n      // Scale the seed out\n      seed *= 65536;\n    }\n\n    seed = Math.floor(seed);\n    if(seed < 256) {\n      seed |= seed << 8;\n    }\n\n    for(var i = 0; i < 256; i++) {\n      var v;\n      if (i & 1) {\n        v = p[i] ^ (seed & 255);\n      } else {\n        v = p[i] ^ ((seed>>8) & 255);\n      }\n\n      perm[i] = perm[i + 256] = v;\n      gradP[i] = gradP[i + 256] = grad3[v % 12];\n    }\n  };\n\n  module.seed(0);\n\n  /*\n  for(var i=0; i<256; i++) {\n    perm[i] = perm[i + 256] = p[i];\n    gradP[i] = gradP[i + 256] = grad3[perm[i] % 12];\n  }*/\n\n  // Skewing and unskewing factors for 2, 3, and 4 dimensions\n  var F2 = 0.5*(Math.sqrt(3)-1);\n  var G2 = (3-Math.sqrt(3))/6;\n\n  var F3 = 1/3;\n  var G3 = 1/6;\n\n  // 2D simplex noise\n  module.simplex2 = function(xin, yin) {\n    var n0, n1, n2; // Noise contributions from the three corners\n    // Skew the input space to determine which simplex cell we're in\n    var s = (xin+yin)*F2; // Hairy factor for 2D\n    var i = Math.floor(xin+s);\n    var j = Math.floor(yin+s);\n    var t = (i+j)*G2;\n    var x0 = xin-i+t; // The x,y distances from the cell origin, unskewed.\n    var y0 = yin-j+t;\n    // For the 2D case, the simplex shape is an equilateral triangle.\n    // Determine which simplex we are in.\n    var i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords\n    if(x0>y0) { // lower triangle, XY order: (0,0)->(1,0)->(1,1)\n      i1=1; j1=0;\n    } else {    // upper triangle, YX order: (0,0)->(0,1)->(1,1)\n      i1=0; j1=1;\n    }\n    // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and\n    // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where\n    // c = (3-sqrt(3))/6\n    var x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords\n    var y1 = y0 - j1 + G2;\n    var x2 = x0 - 1 + 2 * G2; // Offsets for last corner in (x,y) unskewed coords\n    var y2 = y0 - 1 + 2 * G2;\n    // Work out the hashed gradient indices of the three simplex corners\n    i &= 255;\n    j &= 255;\n    var gi0 = gradP[i+perm[j]];\n    var gi1 = gradP[i+i1+perm[j+j1]];\n    var gi2 = gradP[i+1+perm[j+1]];\n    // Calculate the contribution from the three corners\n    var t0 = 0.5 - x0*x0-y0*y0;\n    if(t0<0) {\n      n0 = 0;\n    } else {\n      t0 *= t0;\n      n0 = t0 * t0 * gi0.dot2(x0, y0);  // (x,y) of grad3 used for 2D gradient\n    }\n    var t1 = 0.5 - x1*x1-y1*y1;\n    if(t1<0) {\n      n1 = 0;\n    } else {\n      t1 *= t1;\n      n1 = t1 * t1 * gi1.dot2(x1, y1);\n    }\n    var t2 = 0.5 - x2*x2-y2*y2;\n    if(t2<0) {\n      n2 = 0;\n    } else {\n      t2 *= t2;\n      n2 = t2 * t2 * gi2.dot2(x2, y2);\n    }\n    // Add contributions from each corner to get the final noise value.\n    // The result is scaled to return values in the interval [-1,1].\n    return 70 * (n0 + n1 + n2);\n  };\n\n  // 3D simplex noise\n  module.simplex3 = function(xin, yin, zin) {\n    var n0, n1, n2, n3; // Noise contributions from the four corners\n\n    // Skew the input space to determine which simplex cell we're in\n    var s = (xin+yin+zin)*F3; // Hairy factor for 2D\n    var i = Math.floor(xin+s);\n    var j = Math.floor(yin+s);\n    var k = Math.floor(zin+s);\n\n    var t = (i+j+k)*G3;\n    var x0 = xin-i+t; // The x,y distances from the cell origin, unskewed.\n    var y0 = yin-j+t;\n    var z0 = zin-k+t;\n\n    // For the 3D case, the simplex shape is a slightly irregular tetrahedron.\n    // Determine which simplex we are in.\n    var i1, j1, k1; // Offsets for second corner of simplex in (i,j,k) coords\n    var i2, j2, k2; // Offsets for third corner of simplex in (i,j,k) coords\n    if(x0 >= y0) {\n      if(y0 >= z0)      { i1=1; j1=0; k1=0; i2=1; j2=1; k2=0; }\n      else if(x0 >= z0) { i1=1; j1=0; k1=0; i2=1; j2=0; k2=1; }\n      else              { i1=0; j1=0; k1=1; i2=1; j2=0; k2=1; }\n    } else {\n      if(y0 < z0)      { i1=0; j1=0; k1=1; i2=0; j2=1; k2=1; }\n      else if(x0 < z0) { i1=0; j1=1; k1=0; i2=0; j2=1; k2=1; }\n      else             { i1=0; j1=1; k1=0; i2=1; j2=1; k2=0; }\n    }\n    // A step of (1,0,0) in (i,j,k) means a step of (1-c,-c,-c) in (x,y,z),\n    // a step of (0,1,0) in (i,j,k) means a step of (-c,1-c,-c) in (x,y,z), and\n    // a step of (0,0,1) in (i,j,k) means a step of (-c,-c,1-c) in (x,y,z), where\n    // c = 1/6.\n    var x1 = x0 - i1 + G3; // Offsets for second corner\n    var y1 = y0 - j1 + G3;\n    var z1 = z0 - k1 + G3;\n\n    var x2 = x0 - i2 + 2 * G3; // Offsets for third corner\n    var y2 = y0 - j2 + 2 * G3;\n    var z2 = z0 - k2 + 2 * G3;\n\n    var x3 = x0 - 1 + 3 * G3; // Offsets for fourth corner\n    var y3 = y0 - 1 + 3 * G3;\n    var z3 = z0 - 1 + 3 * G3;\n\n    // Work out the hashed gradient indices of the four simplex corners\n    i &= 255;\n    j &= 255;\n    k &= 255;\n    var gi0 = gradP[i+   perm[j+   perm[k   ]]];\n    var gi1 = gradP[i+i1+perm[j+j1+perm[k+k1]]];\n    var gi2 = gradP[i+i2+perm[j+j2+perm[k+k2]]];\n    var gi3 = gradP[i+ 1+perm[j+ 1+perm[k+ 1]]];\n\n    // Calculate the contribution from the four corners\n    var t0 = 0.6 - x0*x0 - y0*y0 - z0*z0;\n    if(t0<0) {\n      n0 = 0;\n    } else {\n      t0 *= t0;\n      n0 = t0 * t0 * gi0.dot3(x0, y0, z0);  // (x,y) of grad3 used for 2D gradient\n    }\n    var t1 = 0.6 - x1*x1 - y1*y1 - z1*z1;\n    if(t1<0) {\n      n1 = 0;\n    } else {\n      t1 *= t1;\n      n1 = t1 * t1 * gi1.dot3(x1, y1, z1);\n    }\n    var t2 = 0.6 - x2*x2 - y2*y2 - z2*z2;\n    if(t2<0) {\n      n2 = 0;\n    } else {\n      t2 *= t2;\n      n2 = t2 * t2 * gi2.dot3(x2, y2, z2);\n    }\n    var t3 = 0.6 - x3*x3 - y3*y3 - z3*z3;\n    if(t3<0) {\n      n3 = 0;\n    } else {\n      t3 *= t3;\n      n3 = t3 * t3 * gi3.dot3(x3, y3, z3);\n    }\n    // Add contributions from each corner to get the final noise value.\n    // The result is scaled to return values in the interval [-1,1].\n    return 32 * (n0 + n1 + n2 + n3);\n\n  };\n\n  // ##### Perlin noise stuff\n\n  function fade(t) {\n    return t*t*t*(t*(t*6-15)+10);\n  }\n\n  function lerp(a, b, t) {\n    return (1-t)*a + t*b;\n  }\n\n  // 2D Perlin Noise\n  module.perlin2 = function(x, y) {\n    // Find unit grid cell containing point\n    var X = Math.floor(x), Y = Math.floor(y);\n    // Get relative xy coordinates of point within that cell\n    x = x - X; y = y - Y;\n    // Wrap the integer cells at 255 (smaller integer period can be introduced here)\n    X = X & 255; Y = Y & 255;\n\n    // Calculate noise contributions from each of the four corners\n    var n00 = gradP[X+perm[Y]].dot2(x, y);\n    var n01 = gradP[X+perm[Y+1]].dot2(x, y-1);\n    var n10 = gradP[X+1+perm[Y]].dot2(x-1, y);\n    var n11 = gradP[X+1+perm[Y+1]].dot2(x-1, y-1);\n\n    // Compute the fade curve value for x\n    var u = fade(x);\n\n    // Interpolate the four results\n    return lerp(\n        lerp(n00, n10, u),\n        lerp(n01, n11, u),\n       fade(y));\n  };\n\n  // 3D Perlin Noise\n  module.perlin3 = function(x, y, z) {\n    // Find unit grid cell containing point\n    var X = Math.floor(x), Y = Math.floor(y), Z = Math.floor(z);\n    // Get relative xyz coordinates of point within that cell\n    x = x - X; y = y - Y; z = z - Z;\n    // Wrap the integer cells at 255 (smaller integer period can be introduced here)\n    X = X & 255; Y = Y & 255; Z = Z & 255;\n\n    // Calculate noise contributions from each of the eight corners\n    var n000 = gradP[X+  perm[Y+  perm[Z  ]]].dot3(x,   y,     z);\n    var n001 = gradP[X+  perm[Y+  perm[Z+1]]].dot3(x,   y,   z-1);\n    var n010 = gradP[X+  perm[Y+1+perm[Z  ]]].dot3(x,   y-1,   z);\n    var n011 = gradP[X+  perm[Y+1+perm[Z+1]]].dot3(x,   y-1, z-1);\n    var n100 = gradP[X+1+perm[Y+  perm[Z  ]]].dot3(x-1,   y,   z);\n    var n101 = gradP[X+1+perm[Y+  perm[Z+1]]].dot3(x-1,   y, z-1);\n    var n110 = gradP[X+1+perm[Y+1+perm[Z  ]]].dot3(x-1, y-1,   z);\n    var n111 = gradP[X+1+perm[Y+1+perm[Z+1]]].dot3(x-1, y-1, z-1);\n\n    // Compute the fade curve value for x, y, z\n    var u = fade(x);\n    var v = fade(y);\n    var w = fade(z);\n\n    // Interpolate\n    return lerp(\n        lerp(\n          lerp(n000, n100, u),\n          lerp(n001, n101, u), w),\n        lerp(\n          lerp(n010, n110, u),\n          lerp(n011, n111, u), w),\n       v);\n  };\n\n})(this);","export default __webpack_public_path__ + \"static/media/drums.bde58933.mid\";","export default __webpack_public_path__ + \"static/media/tesselated.db632abb.mp3\";","import React, {useState, useEffect, useRef} from 'react';\nimport {useFrame} from 'react-three-fiber';\nimport { Html } from 'drei';\nimport MidiFile from 'midifile';\nimport MidiEvents from 'midievents';\nimport  drums from './drums.mid';\nimport tesselated from './tesselated.mp3';\n\nfunction objectArrayToKeyPairs(obj)\n{\n    const result = {};\n    Object.keys(obj).forEach((k) => {\n    if (typeof obj[k] === \"object\" && obj[k] !== null){\n      if(!Array.isArray(obj[k]))\n        result[k] = obj[k];\n        else\n          result[k] = obj[k].reduce((o, item) => ({...o, [Number(item.playTime)]: item}) ,{});\n        result[k] =  objectArrayToKeyPairs(result[k]);\n    }\n    else {\n          result[k] = obj[k];\n      }\n    })\n    return result;\n}\n\n\nfunction getBuffer( url, success, error ) {\n    const xhr = new XMLHttpRequest();\n    xhr.onreadystatechange = function( e ) {\n        if ( xhr.readyState == 4 ) {\n            if ( xhr.status == 200 ) {\n                return success( e.currentTarget.response );\n            }\n            if ( error ) {\n                return error( `${xhr.status  } ${  xhr.statusText}` );\n            }\n            throw `${xhr.status  } ${  xhr.statusText}`;\n        }\n    };\n    xhr.open( 'GET', url, true );\n    xhr.responseType = 'arraybuffer';\n    xhr.send( null );\n}\n\nfunction checkForMidiAction(midi,elapsedMs,type,subtype,note,threshold=100){\n    const midiEvents = midi.getEvents();\n    if(typeof note !== undefined)\n    return midiEvents.filter(event => event.type === type && event.playTime <= elapsedMs && event.playTime >= elapsedMs-(threshold) && event.subtype === subtype && event.param1 === note);\n    else\n    return midiEvents.filter(event => event.playTime <= elapsedMs && event.playTime >= elapsedMs-(threshold) && event.subtype === subtype && event.type === type );\n}\n\nfunction useMidiAction({type,subtype,note},callback,fallback) {\n    const midi = window.currentMidi;\n    const midiEvents = midi?.getEvents() || [];\n    const aud = window.currentAudio;\n    const startTime = window.audioStartTime;\n    const events = useRef([]);\n    const prevTime = useRef(0);\n    const prevEvents = useRef();\n    useFrame((state,delta)=>{\n        const elapsedMs = (aud?.currentTime*1000)+300;\n        // console.log(audio?.currentTime*1000,Date.now()-startTime, elapsedMs, elapsedMs-audio?.currentTime*1000)\n        // console.log(elapsedMs);\n        prevEvents.current = events?.current;\n        if(midiEvents.length){\n            events.current = objectArrayToKeyPairs(checkForMidiAction(midi,elapsedMs,type,subtype, note,(elapsedMs-prevTime.current)));\n            let called = false;\n            if(Object.keys(events?.current).length){\n                Object.keys(events.current).forEach((i)=>{\n                    const event = events.current[i];\n                    const prev = prevEvents.current[i];\n                    if(typeof prev === 'undefined')\n                    {\n                        // console.log(\"noteOff\", elapsedMs, event.param1, event)\n                        called = true;\n                    }\n                })\n                if(called)\n                callback({elapsedMs,delta:(elapsedMs-prevTime.current)});\n            }\n            if(!called && typeof fallback === 'function')\n                fallback({elapsedMs,delta:(elapsedMs-prevTime.current)});\n        }\n        prevTime.current = elapsedMs;\n    });\n    return null;\n}\nconst Midi = () => {\n    const [midi,setMidi] = useState();\n    const aud = React.createRef();\n    const start = useRef();\n    const prevTime = useRef(0);\n    const events = useRef();\n    const prevEvents = useRef();\n    useEffect(()=>{\n    const startTime = start?.current;\n      getBuffer(drums,(b)=>{\n        const file = new MidiFile(b);\n        console.log(file);\n        const desiredBPM = 174;\n        const ticksPerBeat = file.header.getTicksPerBeat(); // 96 is default (aka 120bpm)\n        const defaultBPM = 120;\n        file.header.setTicksPerBeat((ticksPerBeat*desiredBPM)/defaultBPM); // 139.2 if 174 is bpm\n        setMidi(file);\n        window.currentMidi = file;\n      },()=>{})\n    },[]);\n    useEffect(()=>{\n            window.currentAudio = new Audio(tesselated);\n            aud.current = window.currentAudio;\n            window.audioAnalyzerData = {};\n            window.audioAnalyzerData.audioCtx = new window.AudioContext();\n            window.audioAnalyzerData.analyzer = window.audioAnalyzerData.audioCtx.createAnalyser();\n            window.audioAnalyzerData.analyzer.fftSize = 2048;\n            window.audioAnalyzerData.bufferLength = window.audioAnalyzerData.analyzer.frequencyBinCount;\n            window.audioAnalyzerData.dataArray = new Uint8Array(window.audioAnalyzerData.bufferLength);\n            window.audioAnalyzerData.analyzer.getByteTimeDomainData(window.audioAnalyzerData.dataArray);\n            window.audioAnalyzerData.source = window.audioAnalyzerData.audioCtx.createMediaElementSource(aud?.current); \n            window.audioAnalyzerData.source.connect(window.audioAnalyzerData.analyzer);\n            window.audioAnalyzerData.analyzer.connect(window.audioAnalyzerData.audioCtx.destination);\n            aud.current.play();\n            window.audioStartTime = Date.now();\n            return () =>{\n                aud.current.pause();\n            }\n    },[])\n    return (<></>);\n}\n\nexport default Midi;\nexport {useMidiAction};","function hslToHex(h, s, l) {\n    h /= 360;\n    s /= 100;\n    l /= 100;\n    let r; let g; let b;\n    if (s === 0) {\n      r = g = b = l; // achromatic\n    } else {\n      const hue2rgb = (p, q, t) => {\n        if (t < 0) t += 1;\n        if (t > 1) t -= 1;\n        if (t < 1 / 6) return p + (q - p) * 6 * t;\n        if (t < 1 / 2) return q;\n        if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n        return p;\n      };\n      const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n      const p = 2 * l - q;\n      r = hue2rgb(p, q, h + 1 / 3);\n      g = hue2rgb(p, q, h);\n      b = hue2rgb(p, q, h - 1 / 3);\n    }\n    const toHex = x => {\n      const hex = Math.round(x * 255).toString(16);\n      return hex.length === 1 ? `0${  hex}` : hex;\n    };\n    return `#${toHex(r)}${toHex(g)}${toHex(b)}`;\n  }\n\nexport default hslToHex;\nexport {hslToHex};","/*\nAuto-generated by: https://github.com/pmndrs/gltfjsx\nauthor: patrix (https://sketchfab.com/patrix)\nlicense: CC-BY-NC-SA-4.0 (http://creativecommons.org/licenses/by-nc-sa/4.0/)\nsource: https://sketchfab.com/3d-models/sci-fi-girl-v02-walkcycle-test-07ac452d75cc47969234b224422ea85d\ntitle: Sci-fi Girl v.02 Walkcycle Test\n*/\n\nimport * as THREE from 'three'\nimport React, { useRef, useState, useEffect } from 'react'\nimport { useFrame, useThree } from 'react-three-fiber'\nimport { useGLTF } from '@react-three/drei/useGLTF'\nimport { useAnimations } from '@react-three/drei/useAnimations'\nimport {useMidiAction} from './Midi'\nimport {hslToHex} from './util/hslToHex'\nimport {Stars} from 'drei'\n\nexport default function Model(props) {\n  const group = useRef()\n  const stars = useRef()\n  const color = useRef(hslToHex((new Date()%360),100,50));\n  const { nodes, materials, animations } = useGLTF('/react-three-midi/assets/scifi/scene.gltf')\n  const { actions } = useAnimations(animations, group)\n  console.log(actions)\n  const {camera} = useThree();\n  useEffect(()=>{\n    Object.keys(materials).forEach(mat => {\n      if(mat !== \"cloth_mat\")\n        materials[mat].wireframe = true;\n      else\n        materials[mat].opacity=0.95;\n    })\n    actions[Object.keys(actions)[0]]?.play();\n  })\n  useMidiAction({type:8,subtype:8,note: 40},()=>{\n    const col = new THREE.Color(hslToHex((new Date()/10%360),100,50));\n    materials.cloth_mat.color.r = col.r;\n    materials.cloth_mat.color.g = col.g;\n    materials.cloth_mat.color.b = col.b;\n  })\n  useMidiAction({type:8,subtype:8,note: 36},()=>{\n    // camera.position.z = group.current.position.z+25;\n    const col = new THREE.Color(hslToHex((45-(new Date()/10)%360),100,50));\n    materials.body_mat.color.r = col.r;\n    materials.body_mat.color.g = col.g;\n    materials.body_mat.color.b = col.b;\n  })\n  useMidiAction({type:8,subtype:8,note: 41},()=>{\n    const col = new THREE.Color(hslToHex((90-(new Date()/10)%360),100,50));\n    materials.hair_outer_mat.color.r = col.r;\n    materials.hair_outer_mat.color.g = col.g;\n    materials.hair_outer_mat.color.b = col.b;\n    const col2 = new THREE.Color(hslToHex((120-(new Date()/10)%360),100,50));\n    materials.hair_inner_mat.color.r = col2.r;\n    materials.hair_inner_mat.color.g = col2.g;\n    materials.hair_inner_mat.color.b = col2.b;\n  })\n  useFrame((state,delta)=>{\n    // console.log(state);\n    const {camera} = state;\n    // console.log();\n    if(actions[Object.keys(actions)[0]]?.time <1.2916666269302368){\n      actions[Object.keys(actions)[0]]?.getMixer().setTime(1.2916666269302369);\n    }\n    if(group?.current){\n      const target = new THREE.Vector3(group.current.position.x, group.current.position.y+13,group.current.position.z)\n      camera.controls.target = target;\n      group.current.position.z +=0.1;\n\n      const pos = new THREE.Vector3(group.current.position.x,group.current.position.y+10,group.current.position.z);\n      camera.lookAt(pos)\n      // console.log(camera);\n      // console.log(group.current);\n      // console.log(nodes.modelteeth_upper_body_mat_0.geometry);\n      // console.log(materials.cloth_mat);\n      // console.log(group.current.children[0].children[0])\n      // console.log(window.audioAnalyzerData.dataArray)\n\n      //  dataArray[512] / 128.0,dataArray[768] / 128.0);\n    }\n    if(stars?.current){\n      stars.current.position.y = 3*Math.sin(new Date()/6000);\n    }\n  })\n  return (\n    <group ref={group} {...props} dispose={null} >\n      <group rotation={[-Math.PI / 2, 0, 0]}>\n        <group rotation={[Math.PI / 2, 0, 0]}>\n          <mesh\n            name=\"0\"\n            material={materials.cloth_mat}\n            geometry={nodes['0'].geometry}\n            morphTargetDictionary={nodes['0'].morphTargetDictionary}\n            material-color={color?.current}\n            morphTargetInfluences={nodes['0'].morphTargetInfluences}\n          />\n          <primitive object={nodes._rootJoint} />\n          <skinnedMesh\n            material={materials.body_mat}\n            geometry={nodes.modelbody_body_mat_0.geometry}\n            skeleton={nodes.modelbody_body_mat_0.skeleton}\n          />\n          <skinnedMesh\n            material={materials.body_mat}\n            geometry={nodes.modelteeth_upper_body_mat_0.geometry}\n            skeleton={nodes.modelteeth_upper_body_mat_0.skeleton}\n          />\n          <skinnedMesh\n            material={materials.body_mat}\n            geometry={nodes.modelteeth_lower_body_mat_0.geometry}\n            skeleton={nodes.modelteeth_lower_body_mat_0.skeleton}\n          />\n          <skinnedMesh\n          wireframe={true}\n            material={materials.body_mat}\n            geometry={nodes.modeltongue_body_mat_0.geometry}\n            skeleton={nodes.modeltongue_body_mat_0.skeleton}\n          />\n          <skinnedMesh\n            material={materials.eyes_outer_mat}\n            geometry={nodes.modeleyes_R_outer_eyes_outer_mat_0.geometry}\n            skeleton={nodes.modeleyes_R_outer_eyes_outer_mat_0.skeleton}\n          />\n          <skinnedMesh\n            material={materials.eyes_inner_mat}\n            geometry={nodes.modeleyes_R_inner_eyes_inner_mat_0.geometry}\n            skeleton={nodes.modeleyes_R_inner_eyes_inner_mat_0.skeleton}\n          />\n          <skinnedMesh\n            material={materials.eyes_outer_mat}\n            geometry={nodes.modeleyes_L_outer_eyes_outer_mat_0.geometry}\n            skeleton={nodes.modeleyes_L_outer_eyes_outer_mat_0.skeleton}\n          />\n          <skinnedMesh\n            material={materials.eyes_inner_mat}\n            geometry={nodes.modeleyes_L_inner_eyes_inner_mat_0.geometry}\n            skeleton={nodes.modeleyes_L_inner_eyes_inner_mat_0.skeleton}\n          />\n          <skinnedMesh\n            material={materials.tear_mat}\n            geometry={nodes.modeltear_L_tear_mat_0.geometry}\n            skeleton={nodes.modeltear_L_tear_mat_0.skeleton}\n          />\n          <skinnedMesh\n            material={materials.tear_mat}\n            geometry={nodes.modeltear_R_tear_mat_0.geometry}\n            skeleton={nodes.modeltear_R_tear_mat_0.skeleton}\n          />\n          <skinnedMesh\n            material={materials.hair_outer_mat}\n            geometry={nodes.modelhair_outer_hair_outer_mat_0.geometry}\n            skeleton={nodes.modelhair_outer_hair_outer_mat_0.skeleton}\n          />\n          <skinnedMesh\n            material={materials.hair_inner_mat}\n            geometry={nodes.modelhair_inner_hair_inner_mat_0.geometry}\n            skeleton={nodes.modelhair_inner_hair_inner_mat_0.skeleton}\n          />\n          <skinnedMesh\n            material={materials.eyelash_mat}\n            geometry={nodes.modeleyelash_L_upper_eyelash_mat_0.geometry}\n            skeleton={nodes.modeleyelash_L_upper_eyelash_mat_0.skeleton}\n          />\n          <skinnedMesh\n            material={materials.eyelash_mat}\n            geometry={nodes.modeleyelash_L_lower_eyelash_mat_0.geometry}\n            skeleton={nodes.modeleyelash_L_lower_eyelash_mat_0.skeleton}\n          />\n          <skinnedMesh\n            material={materials.eyelash_mat}\n            geometry={nodes.modeleyelash_R_upper_eyelash_mat_0.geometry}\n            skeleton={nodes.modeleyelash_R_upper_eyelash_mat_0.skeleton}\n          />\n          <skinnedMesh\n            material={materials.eyelash_mat}\n            geometry={nodes.modeleyelash_R_lower_eyelash_mat_0.geometry}\n            skeleton={nodes.modeleyelash_R_lower_eyelash_mat_0.skeleton}\n          />\n        </group>\n      </group>\n      <group ref={stars}>\n      <Stars\n            radius={20} // Radius of the inner sphere (default=100)\n            depth={25} // Depth of area where stars should fit (default=50)\n            count={8000} // Amount of stars (default=5000)\n            factor={2} // Size factor (default=4)\n            saturation={0.5} // Saturation 0-1 (default=0)\n            fade // Faded dots (default=false)\n          />\n    </group>\n    </group>\n  )\n}\n\n\nuseGLTF.preload('/react-three-midi/assets/scifi/scene.gltf')","import * as THREE from 'three'\nimport React, { useRef, useEffect, useMemo } from 'react'\nimport { extend, useThree, useFrame } from 'react-three-fiber'\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer'\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass'\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass'\nimport { UnrealBloomPass } from 'three/examples/jsm/postprocessing/UnrealBloomPass'\nimport { FilmPass } from 'three/examples/jsm/postprocessing/FilmPass'\nimport { AfterimagePass } from 'three/examples/jsm/postprocessing/AfterimagePass'\nimport { FXAAShader } from 'three/examples/jsm/shaders/FXAAShader'\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\n// import { WaterPass } from './Waterpass'\n\nextend({ EffectComposer, ShaderPass, RenderPass, UnrealBloomPass, FilmPass, AfterimagePass, FXAAShader })\nextend({ OrbitControls })\nconst ThreeControls = (props) => {\n  const { gl, camera } = useThree()\n  const ref = useRef()\n  \n  useFrame(() => {\n    ref.current.update()\n    camera.controls = ref.current\n  camera.position.y=18})\n  return <orbitControls ref={ref} args={[camera, gl.domElement]} {...props} />\n}\nexport default function Effects() {\n  const composer = useRef()\n  const { scene, gl, size, camera } = useThree()\n  useEffect(() => void composer.current.setSize(size.width, size.height), [size])\n  useFrame(() => composer.current.render(), 2)\n  const aspect = useMemo(() => new THREE.Vector2(size.width, size.height), [size])\n  return (\n    <>\n      <ThreeControls\n      enablePan\n      enableZoom\n      enableDamping\n      minDistance={15}\n      maxDistance={80}\n      dampingFactor={0.5}\n        rotateSpeed={2}\n      maxPolarAngle={Math.PI*2}\n      minPolarAngle={-Math.PI*2}\n    />\n\n    <effectComposer ref={composer} args={[gl]}>\n      <renderPass attachArray=\"passes\" scene={scene} camera={camera} />\n      {/* <waterPass attachArray=\"passes\" factor={2} /> */}\n      {/* <unrealBloomPass attachArray=\"passes\" args={[aspect, 1, 3, 0.8]} /> */}\n      {/* <afterimagePass attachArray=\"passes\" uniforms-damp-value={0.977} /> */}\n      \n      <shaderPass attachArray=\"passes\" args={[FXAAShader]} uniforms-resolution-value={[1 / size.width, 1 / size.height]} renderToScreen />\n      </effectComposer>\n    </>\n  )\n}\n","import {useRef} from \"react\";\nimport { useFrame, useUpdate } from \"react-three-fiber\";\nimport {useMidiAction} from './Midi'\nimport { noise } from \"./perlin\";\nimport * as THREE from 'three';\n\nfunction updateMesh(geometry,ex,elapsedMs){\n  noise.seed((elapsedMs/10)%1);\n    let pos = geometry.getAttribute(\"position\");\n    let pa = pos.array;\n    const hVerts = geometry.parameters.heightSegments + 1;\n    const wVerts = geometry.parameters.widthSegments + 1;\n    for (let j = 0; j < hVerts; j++) {\n      for (let i = 0; i < wVerts; i++) {\n        pa[3 * (j * wVerts + i) + 2] =\n          (noise.simplex2(i+(elapsedMs/150) / 100, j+(elapsedMs/150) / 100) +\n            noise.simplex2((i+(elapsedMs/150) + 200) / 50, j+(elapsedMs/150) / 50) * Math.pow(ex, 1) +\n            noise.simplex2((i+(elapsedMs/150) + 400) / 25, j+(elapsedMs/150) / 25) * Math.pow(ex, 2) +\n            noise.simplex2((i+(elapsedMs/150) + 600) / 12.5, j+(elapsedMs/150) / 12.5) * Math.pow(ex, 3) +\n            +(noise.simplex2((i+(elapsedMs/150) + 800) / 6.25, j+(elapsedMs/150) / 6.25) * Math.pow(ex, 4))) /\n          2;\n      }\n    }\n    pos.needsUpdate = true;\n}\nconst Terrain = () => {\n  const exx = useRef(1.1); \n  const geo = useRef();\n  const noiseGeo = useRef();\n  const secondMesh = useRef(new THREE.PlaneBufferGeometry(1000,5000,200,1000));\n\n  // useFrame(()=>{\n  \n  // })\n  const noise = useUpdate(({ geometry }) => {\n    updateMesh(geometry,1.3,40);\n  });\n  const mesh = useUpdate(({ geometry }) => {\n    updateMesh(geometry,1.3,30);\n  });\n  useMidiAction({type:8,subtype:9,note: 40},()=>{\n    const geometry = geo.current;\n    const elapsedMs = window.currentAudio.currentTime;\n    updateMesh(geometry,1.7,elapsedMs);\n  },()=>{});\n  //   const geometry = geo.current;\n  //   const elapsedMs = document.getElementById(\"audioPlayer\").currentTime;\n\n  //   Math.sin(elapsedMs);\n  //   let pos = geometry.getAttribute(\"position\");\n  //   let pa = pos.array;\n  //   const hVerts = geometry.parameters.heightSegments + 1;\n  //   const wVerts = geometry.parameters.widthSegments + 1;\n  //   for (let j = 0; j < hVerts; j+=2) {\n  //     for (let i = 0; i < wVerts; i+=2) {\n  //       pa[3 * (j * wVerts + i) + 2] += 0.15*Math.sin(elapsedMs*5);\n  //     }\n  //   }\n  //   for (let j = 1; j < hVerts; j+=2) {\n  //     for (let i = 1; i < wVerts; i+=2) {\n  //       pa[3 * (j * wVerts + i) + 2] += 0.15*Math.cos(elapsedMs*5);\n  //     }\n  //   }\n  //   pos.needsUpdate = true;\n  //   //  mesh.current.rotation.z += 0.001;\n  // });\n  // Raf loop\n  useFrame(() => {\n    const geometry = geo.current;\n    const noiseGeometry = noiseGeo.current;\n    window.audioAnalyzerData.analyzer.getByteFrequencyData(window.audioAnalyzerData.dataArray);\n    let pos = geometry.getAttribute(\"position\");\n    let pa = pos.array;\n    let noisePos = noiseGeometry.getAttribute(\"position\");\n    let noisePa = noisePos.array;\n    const hVerts = geometry.parameters.heightSegments + 1;\n    const wVerts = geometry.parameters.widthSegments + 1;\n    for (let j = 0; j < hVerts; j+=3) {\n      for (let i = 0; i < wVerts; i+=3) {\n        pa[3 * (j * wVerts + i) + 2] = noisePa[3 * (j * wVerts + i) + 2] + window.audioAnalyzerData.dataArray[i] / 30.0;\n      }\n    }\n    pos.needsUpdate = true;\n    noisePos.needsUpdate = true;\n   \n    // group.current.children[0].children[0].children[12].scale.x = dataArray[256]/128.0\n    // group.current.children[0].children[0].children[11].scale.x = dataArray[256]/50\n    // group.current.children[0].children[0].children[9].scale.x = dataArray[512]/50\n  });\n\n  return (\n    <group>\n      \n      <planeBufferGeometry attach=\"geometry\"  ref={noiseGeo} args={[1000,5000,200,1000]} />\n\n      <mesh ref={mesh} rotation={[-Math.PI / 2, 0, 0]}>\n        <planeBufferGeometry attach=\"geometry\" ref={geo} args={[1000,5000,200,1000]} />\n        <meshBasicMaterial\n          attach=\"material\"\n          wireframe={true}\n          color={\"hotpink\"}\n          specular={\"hotpink\"}\n          shininess={3}\n          flatShading\n          />\n      </mesh>\n    </group>\n  );\n};\n\nexport default Terrain;\n","/*\nAuto-generated by: https://github.com/pmndrs/gltfjsx\nauthor: LowlyPoly (https://sketchfab.com/lowlypoly)\nlicense: CC-BY-4.0 (http://creativecommons.org/licenses/by/4.0/)\nsource: https://sketchfab.com/3d-models/stylized-crystal-0a0c75dab0844e7fa5b299d4af858bec\ntitle: Stylized Crystal\n*/\n\nimport React, { useRef } from 'react'\nimport { useGLTF } from '@react-three/drei/useGLTF'\nimport { useFrame } from 'react-three-fiber'\n\nexport default function Crystal(props) {\n  const group = useRef()\n  const { nodes, materials } = useGLTF('/react-three-midi/assets/crystal/scene.gltf')\n  useFrame(()=>{\n    if(group?.current){\n      window.audioAnalyzerData.analyzer.getByteFrequencyData(window.audioAnalyzerData.dataArray);\n      group.current.scale.x = window.audioAnalyzerData.dataArray[256]/128.0;\n      group.current.scale.y = window.audioAnalyzerData.dataArray[128]/128.0;\n      group.current.scale.z = window.audioAnalyzerData.dataArray[128]/128.0;\n    }\n  });\n  return (\n    <group ref={group} {...props} dispose={null}>\n      <group rotation={[-Math.PI / 2, 0, 0]} >\n        <group rotation={[Math.PI / 2, 0, 0]} scale={[0.5,0.5,0.5]}>\n          <group position={[0, 0, 0]} scale={[16.99, 16.99, 16.99]}>\n            <mesh material={materials.crystal_17_2} geometry={nodes.crystal17_2_crystal_17_2_0.geometry} />\n          </group>\n        </group>\n      </group>\n    </group>\n  )\n}\n\nuseGLTF.preload('/react-three-midi/assets/crystal/scene.gltf')\n","import './App.css';\nimport { Canvas, useFrame } from 'react-three-fiber';\nimport React, { useRef, useState, Suspense } from 'react';\nimport Midi from './Midi';\nimport { draco, Stats, Stars,Html } from 'drei';\nimport Model from './Scene';\nimport Effects from './Effects';\nimport Terrain from './Terrain'\nimport Crystal from './Crystal'\n// import Weaver from './Weaver'\nfunction Box(props) {\n  // This reference will give us direct access to the mesh\n  const mesh = useRef();\n\n  // Set up state for the hovered and active state\n  const [hovered, setHover] = useState(false);\n  const [active, setActive] = useState(false);\n\n  // Rotate mesh every frame, this is outside of React without overhead\n  useFrame(() => {\n    mesh.current.rotation.x = mesh.current.rotation.y += 0.01;\n  });\n\n  return (\n    <mesh\n      {...props}\n      ref={mesh}\n      scale={active ? [1.5, 1.5, 1.5] : [1, 1, 1]}\n      onClick={(event) => setActive(!active)}\n      onPointerOver={(event) => setHover(true)}\n      onPointerOut={(event) => setHover(false)}\n    >\n      <boxBufferGeometry args={[1, 1, 1]} />\n      <meshStandardMaterial color={hovered ? 'hotpink' : 'orange'} />\n    </mesh>\n  );\n}\n\nfunction App() {\n  return (\n    <>\n      <Canvas camera={{ position: [0, 0, 8] }} shadowMap>\n        <ambientLight />\n        <Stats\n        showPanel={0} // Start-up panel (default=0)\n        className=\"stats\" // Optional className to add to the stats container dom element\n      />\n      <Suspense>\n        <Midi />\n        <Suspense fallback={<Html><h2>Loading</h2></Html>}>\n          <Effects />\n          <group scale={[0.15,0.15,0.15]}>\n          {/* <Weaver /> */}\n          </group>\n          <Model position={[-10, 0, 0]} rotation={[0, 0, 0]} />\n          <Terrain />\n          <Crystal position={[150,0,-120]} scale={[0.5,0.5,0.5]}/>\n          <Crystal position={[-30,0,-40]} scale={[0.5,0.5,0.5]}/>\n          <Crystal position={[85,0,-260]} scale={[0.5,0.5,0.5]}/>\n          <Crystal position={[150,0, 680]} scale={[0.5,0.5,0.5]}/>\n          <Crystal position={[-100,0, 560]} scale={[0.5,0.5,0.5]}/>\n          <Crystal position={[-64,0, 460]} scale={[0.5,0.5,0.5]}/>\n          <Crystal position={[-80,0, 160]} scale={[0.5,0.5,0.5]}/>\n          <Crystal position={[54,0, 380]} scale={[0.5,0.5,0.5]}/>\n        </Suspense>\n        </Suspense>\n        <pointLight position={[10, 10, 10]} />\n      </Canvas>\n    </>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}